apiVersion: apps/v1
kind: Deployment
metadata:
  name: tpcoms01
spec:
  replicas: 3
  selector:
    matchLabels:
      app: tpcoms
  template:
    metadata:
      labels:
        app: tpcoms
    spec:
      containers:
      - name: tpcoms04
        image: nginx
        ports:
        - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: tpcoms-service
spec:
  type: ClusterIP
  selector:
    app: tpcoms
  ports:
  - port: 80
    protocol: TCP
    targetPort: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tls-tpcoms-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  tls:
  - hosts:
      - tanlv.io.vn
    secretName: testsecret-tls
  ingressClassName: nginx
  rules:
  - host: tanlv.io.vn
    http: 
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: tpcoms-service
            port:
              number: 80
---
apiVersion: v1
kind: Secret
metadata:
  name: testsecret-tls
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURrVENDQXhpZ0F3SUJBZ0lTQnMyWENYanZ5b0IyY0p5eWwwMUljL3ZMTUFvR0NDcUdTTTQ5QkFNRE1ESXgKQ3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRmJtTnllWEIwTVFzd0NRWURWUVFERXdKRgpPREFlRncweU5URXdNekF3TmpRME1UVmFGdzB5TmpBeE1qZ3dOalEwTVRSYU1CWXhGREFTQmdOVkJBTVRDM1JoCmJteDJMbWx2TG5adU1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRWZlN0tTejB4ZzNpaWZFZSsKSHhIQTRtQWtMb3p6eFRiODBsR253UzJqUmEvVE9wZzV5ZW1hTlFUUDFpa2NlMWFrcXE1NkFOa0ZLMzlmVm00VApVZmpheGFPQ0FpZ3dnZ0lrTUE0R0ExVWREd0VCL3dRRUF3SUhnREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNECkFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVEFRSC9CQUl3QURBZEJnTlZIUTRFRmdRVVc5c05PY0FIbFlTVm9ZVGwKeWc4V1paK0Q0TnN3SHdZRFZSMGpCQmd3Rm9BVWp3MFRvdll1ZnRGUWJETVlPRjFaamlOeWtjb3dNZ1lJS3dZQgpCUVVIQVFFRUpqQWtNQ0lHQ0NzR0FRVUZCekFDaGhab2RIUndPaTh2WlRndWFTNXNaVzVqY2k1dmNtY3ZNQ1VHCkExVWRFUVFlTUJ5Q0RTb3VkR0Z1YkhZdWFXOHVkbTZDQzNSaGJteDJMbWx2TG5adU1CTUdBMVVkSUFRTU1Bb3cKQ0FZR1o0RU1BUUlCTUMwR0ExVWRId1FtTUNRd0lxQWdvQjZHSEdoMGRIQTZMeTlsT0M1akxteGxibU55TG05eQpaeTgzTmk1amNtd3dnZ0VFQmdvckJnRUVBZFo1QWdRQ0JJSDFCSUh5QVBBQWRnQ1dsMlMvVlZpWHJmZERoMmczCkNFSjM2ZkE2MWZhazh6WnVScVEvRDhxcHhnQUFBWm8wRWJCQUFBQUVBd0JITUVVQ0lFUjNsWFF2eEkzczF1SVUKVjh1b1Fhbmk4QlBPc05LQVZJTmFFV1Vsa1QxeUFpRUFpOTZyVHhwYURKeVNDSEphYzdYSFI1SmR1SXdVODcrcwpYcDFOOEtSN1BtOEFkZ0FaaHRUSEtLcHYvcm9EYjNncVRRR1JxczR0Y2pFUHJzNWRjRUV0SlV6SDFBQUFBWm8wCkViZlpBQUFFQXdCSE1FVUNJRVVxYmlBZEpXQUtCQm9VNm5iV0lnQk8wWGhrd1pTMTdjdW9pbHJKdW1UOEFpRUEKdDRNNytYak9EMnY2anMvRUZGUXlnVlVOc05mSGRpUTlFODZvS0tqT0xKc3dDZ1lJS29aSXpqMEVBd01EWndBdwpaQUl3UGZOYTB3MkUzYXVuam1kTkt3UXpmNW1VNXdvRHdXVEJJLzdJOU1reU5WQ0tyaklpdGx1YlM1ckRGcU1nCkJpeHNBakFPMyszVzVkelJ0Rm1iSUNQQXI3cFZ1dU9SMnc0MDlwRElyS3owWURGWHJtdk5rY0Zzbnh3cnpIcmsKSytpcHg0dz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJRVZqQ0NBajZnQXdJQkFnSVFZNVdUWThKT2NJSnhXUmkvdzlmdFZqQU5CZ2txaGtpRzl3MEJBUXNGQURCUApNUXN3Q1FZRFZRUUdFd0pWVXpFcE1DY0dBMVVFQ2hNZ1NXNTBaWEp1WlhRZ1UyVmpkWEpwZEhrZ1VtVnpaV0Z5ClkyZ2dSM0p2ZFhBeEZUQVRCZ05WQkFNVERFbFRVa2NnVW05dmRDQllNVEFlRncweU5EQXpNVE13TURBd01EQmEKRncweU56QXpNVEl5TXpVNU5UbGFNREl4Q3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRgpibU55ZVhCME1Rc3dDUVlEVlFRREV3SkZPREIyTUJBR0J5cUdTTTQ5QWdFR0JTdUJCQUFpQTJJQUJORmw4bDdjClM3UU1BcHpTc3ZydTZXeXJPcTQ0b2ZUVU9USXp4VUxVekRNTU5NY2hJSkJ3WE9oaUx4eHhzMExYZWI1R0RjSGIKUjZFVG9NZmZnU1pqTzlTTkhmWTlnak15OXZRcjUvV1dPclFUWnhoN2F6Nk5TTm5xM3UydWJUNkhUS09CK0RDQgo5VEFPQmdOVkhROEJBZjhFQkFNQ0FZWXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CCk1CSUdBMVVkRXdFQi93UUlNQVlCQWY4Q0FRQXdIUVlEVlIwT0JCWUVGSThORTZMMkxuN1JVR3d6R0RoZFdZNGoKY3BIS01COEdBMVVkSXdRWU1CYUFGSG0wV2VaN3R1WGtBWE9BQ0lqSUdsajI2WnR1TURJR0NDc0dBUVVGQndFQgpCQ1l3SkRBaUJnZ3JCZ0VGQlFjd0FvWVdhSFIwY0RvdkwzZ3hMbWt1YkdWdVkzSXViM0puTHpBVEJnTlZIU0FFCkREQUtNQWdHQm1lQkRBRUNBVEFuQmdOVkhSOEVJREFlTUJ5Z0dxQVloaFpvZEhSd09pOHZlREV1WXk1c1pXNWoKY2k1dmNtY3ZNQTBHQ1NxR1NJYjNEUUVCQ3dVQUE0SUNBUUJuRTBoR0lOS3NDWVdpMFh4MXlneEQ1cWloRWpaMApSSTN0VFp6MXd1QVRIM1p3WVBJcDk3a1dFYXlhbkQxajBjRGhJWXp5NENrRG8yakI4RDV0MGE2elpXemxyOThkCkFRRk5oOHVLSmtJSGRMU2h5K25VeWVaeGM1Yk5lTXAxTHUwZ1N6RTRNY3FmbU5NdklwZWl3V1NZTzl3ODJPYjgKb3R2WGNPMkpVWWkzc3ZISVdSbTMrNzA3RFViTDUxWE1jWTJpWmRsQ3E0V2E5bmJ1azNXVFU0Z3I2TFk4TXpWQQphRFFHMis0VTNlSjZxVUYxMGJCblIxdXVWeURZczlSaHJ3dWNSVm5mdURqMjlDTUxUc3BsTTVmNXdTVjVoVXBtClV3cC92VjdNNHc0YUd1bnQ3NGtvWDcxbjRFZGFnQ3NML1lrNSttQVFVMCt0dWUwSk9mQVYvUjZ0MWsrWGs5czIKSE1RRmVveHBwZnpBVkMwNEZkRzlNK0FDMkpXeG1GU3Q2QkN1aDNDRWV5M2ZFNTJRcmo5WU03NXJ0dklqc20vMQpIbCt1Ly9XcXhudTFaUTRqcGErVnB1WmlHT2xXcnFTUDllb2dkT2hDR2lzbnlld1dKd1JRT3FLMTZ3aUd5WmVSCnhzL0Jla3c2NXZ3U0lhVmtCcnVQaVRmTU9vMFpoNGdWYTgvcUpnTWJKYnlyd3dHOTd6L1BSZ21MS0NEbDh6M2QKdEEwWjdxcTdmdGEwR2wyNHV5dUIwNWRxSTVKMUx2QXpLdVdkSWpUMXRQOHFDb3hTRS94cGl4OGhYMmR0M2grLwpqdWpVZ0ZQRlowRVZaMHhTeUJOUkYzTWJvR1puWVhGVXhwTmpUV1BLcGFnREhKUW1xckFjRG1XSm5Nc0ZZM2pTCnUxaWd2M09lZm5XalNRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
  tls.key: LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JR0hBZ0VBTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEJHMHdhd0lCQVFRZ2FjMCthQUxrSDZYVW9DM2oKL1VENnpOSDJVNDNNRzZMT0NJMkJSZ0lBeTN5aFJBTkNBQVI5N3NwTFBUR0RlS0o4Ujc0ZkVjRGlZQ1F1alBQRgpOdnpTVWFmQkxhTkZyOU02bURuSjZabzFCTS9XS1J4N1ZxU3Fybm9BMlFVcmYxOVdiaE5SK05yRgotLS0tLUVORCBQUklWQVRFIEtFWS0tLS0t
